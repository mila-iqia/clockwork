# Clockwork Developer Guide

Details about the implementation go here.

## Note about formatting

You need to run `black` before committing your code or else the CI will reject your pull request.
To do so, you simply have to call `black .` in the root directory.
This is a python module that can be installed with `python3 -m pip install black`.

## Note about translation

Each time a word or sentence which will be displayed to the user is added, it has to be translated.
Details about this process can be found in the [internationalization](internationalization.md) document,
but a quick way to do it is the following.

1. Wrap the string to be translated into `gettext` in the code.
        ```
        from flask_babel import gettext
        ...
        gettext("String to translate")
        ```
2. Run this script to generate/update the required files.
      ```
      bash scripts/run_two_pybabel_cmds.sh
      ```
3. Replace the missing entries corresponding to the new strings by manually editing the file `clockwork_web/static/locales/fr/LC_MESSAGES/messages.po` to fill in the values of `msgstr ""` where appropriate.

The compiled translation files should then be automatically generated by the Docker container `clockwork_dev` or `clockwork_web`.

Note that only the web service has language options. The REST API is available only in English.

## Other sections of the documentation

More details can be found in the following sections:
* [Obtaining the state of the Slurm clusters](slurm_state.md)
* [Retrieving GPU data](gpu.md)
* [Internationalization](internationalization.md)
